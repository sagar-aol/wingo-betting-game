<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Betting Modal</title>
<style>
  :root{
    --bg:#0b0b0d; --panel:#14141a; --muted:#98a0ab;
    --accent:#1abc9c; --accent2:#e67e22;
    --plus:#27ae60; --minus:#c0392b;
    --radius:12px; --max-w:520px;
  }
  * { user-select: none; -webkit-user-select: none; }
  body{background:var(--bg);margin:0;font-family:Arial,Helvetica,sans-serif;color:#fff;display:flex;align-items:center;justify-content:center;padding:16px;}
  .modal{position:relative;width:100%;max-width:var(--max-w);background:var(--panel);border-radius:var(--radius);padding:4vw;box-shadow:0 8px 30px rgba(0,0,0,0.6);}
  h1{text-align:center;font-size:1.2rem;margin:0 0 1rem;color:var(--accent);}
  .info-btn{position:absolute;top:8px;right:8px;background:none;border:none;color:var(--muted);font-size:1.2rem;cursor:pointer;}

  .section{margin-bottom:12px;}
  .row-flex{display:flex;gap:8px;}
  .grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;}

  .base-btn,.quick-btn,.mult-btn{
    flex:1;
    padding:10px;
    border-radius:8px;
    background:#222;
    color:#fff;
    border:none;
    cursor:pointer;
    font-weight:bold;
    font-size:1rem;
  }
  .base-btn.active{background:var(--accent);color:#000;}
  .mult-btn.active{background:var(--accent2);color:#000;}
  .quick-btn.plus{background:var(--plus);}
  .quick-btn.minus{background:var(--minus);}

  .exact-input{width:100%;padding:10px;border-radius:8px;border:none;text-align:center;font-size:1rem;margin-bottom:6px;}
  .summary{text-align:center;font-size:1.2rem;font-weight:bold;margin:12px 0;}

  .actions{display:flex;gap:8px;}
  .actions button{flex:1;padding:10px;border-radius:8px;border:none;cursor:pointer;font-weight:bold;}
  .cancel{background:#555;color:#fff;}
  .place{background:var(--accent);color:#000;}

  .overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:none;align-items:center;justify-content:center;z-index:999;}
  .overlay-content{background:var(--panel);padding:20px;border-radius:var(--radius);max-width:90%;max-height:80%;overflow-y:auto;color:#fff;}
  .overlay h2{margin-top:0;color:var(--accent);}
  .close-overlay{background:#555;color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;margin-top:10px;}
</style>
</head>
<body>
<div class="modal">
  <button class="info-btn" id="infoBtn">ℹ️</button>
  <h1>Betting Calculator</h1>

  <!-- Base amounts -->
  <div class="section">
    <div class="row-flex">
      <button class="base-btn active" data-base="1">$1</button>
      <button class="base-btn" data-base="10">$10</button>
      <button class="base-btn" data-base="100">$100</button>
      <button class="base-btn" data-base="1000">$1000</button>
    </div>
  </div>

  <!-- Quick adjust -->
  <div class="section">
    <div class="row-flex">
      <button class="quick-btn minus" data-add="-10">-10</button>
      <button class="quick-btn minus" data-add="-5">-5</button>
      <button class="quick-btn minus" data-add="-2">-2</button>
      <button class="quick-btn minus" data-add="-1">-1</button>
      <button class="quick-btn plus" data-add="1">+1</button>
      <button class="quick-btn plus" data-add="2">+2</button>
      <button class="quick-btn plus" data-add="5">+5</button>
      <button class="quick-btn plus" data-add="10">+10</button>
    </div>
  </div>

  <!-- Multipliers -->
  <div class="section">
    <div class="grid-4">
      <button class="mult-btn active" data-m="1">×1</button>
      <button class="mult-btn" data-m="2">×2</button>
      <button class="mult-btn" data-m="3">×3</button>
      <button class="mult-btn" data-m="4">×4</button>
      <button class="mult-btn" data-m="5">×5</button>
      <button class="mult-btn" data-m="10">×10</button>
      <button class="mult-btn" data-m="20">×20</button>
      <button class="mult-btn" data-m="50">×50</button>
    </div>
  </div>

  <!-- Exact amount -->
  <input id="exactInput" class="exact-input" type="number" placeholder="Enter exact amount">

  <!-- Summary -->
  <div class="summary" id="summary">Total: $1</div>

  <!-- Actions -->
  <div class="actions">
    <button class="cancel">Cancel</button>
    <button class="place">Place Bet</button>
  </div>
</div>

<!-- Info overlay -->
<div class="overlay" id="infoOverlay">
  <div class="overlay-content">
    <h2>How to Use</h2>
    <ul>
      <li>Tap a <b>Base Amount</b> to set it, tap again to add it.</li>
      <li>Use <b>Quick Adjust</b> (+/-) for small changes.</li>
      <li>Tap a <b>Multiplier</b> to apply it, hold to multiply repeatedly. ×1 adds base amount on hold.</li>
      <li>Hold any button for rapid change.</li>
      <li>Type directly in the box to set exact amount.</li>
    </ul>
    <button class="close-overlay" id="closeOverlay">Close</button>
  </div>
</div>

<script>
(() => {
  const MAX_TOTAL = 1e10;
  const LONG_PRESS_DELAY = 350;
  const REPEAT_INTERVAL = 120;
  let base = 1, multiplier = 1, total = base*multiplier, override = false;
  let holdTimer, repeatTimer, isLongPress = false;

  const baseBtns = document.querySelectorAll('.base-btn');
  const multBtns = document.querySelectorAll('.mult-btn');
  const quickBtns = document.querySelectorAll('.quick-btn');
  const exactInput = document.getElementById('exactInput');
  const summaryEl = document.getElementById('summary');

  const fmt = n => Number(n).toLocaleString('en-IN',{maximumFractionDigits:0});
  const update = () => summaryEl.textContent = `Total: $${fmt(total)}`;
  const setTotal = v => { total = Math.max(0, Math.min(MAX_TOTAL, Math.floor(v))); update(); };
  const clearOverride = () => { if (override) { override = false; exactInput.value = ''; } };

  function addLongPress(el, onClick, onHold) {
    el.addEventListener('click', () => {
      if (isLongPress) { isLongPress = false; return; }
      onClick();
    });
    el.addEventListener('pointerdown', () => {
      isLongPress = false;
      holdTimer = setTimeout(() => {
        isLongPress = true;
        onHold();
        repeatTimer = setInterval(onHold, REPEAT_INTERVAL);
      }, LONG_PRESS_DELAY);
    });
    ['pointerup','pointerleave','pointercancel'].forEach(ev=>{
      el.addEventListener(ev,()=>{
        clearTimeout(holdTimer);
        clearInterval(repeatTimer);
      });
    });
  }

  baseBtns.forEach(btn=>{
    const val = Number(btn.dataset.base);
    addLongPress(btn,
      () => {
        clearOverride();
        if (btn.classList.contains('active')) {
          setTotal(total + val); // add if already active
        } else {
          baseBtns.forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          base = val;
          setTotal(base * multiplier);
        }
      },
      () => { clearOverride(); setTotal(total + val); }
    );
  });

  multBtns.forEach(btn=>{
    const val = Number(btn.dataset.m);
    addLongPress(btn,
      () => {
        clearOverride();
        if (btn.classList.contains('active')) {
          if (val === 1) setTotal(total + base);
          else setTotal(total * val);
        } else {
          multBtns.forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          multiplier = val;
          setTotal(base * multiplier);
        }
      },
      () => {
        clearOverride();
        if (val === 1) setTotal(total + base);
        else setTotal(total * val);
      }
    );
  });

  quickBtns.forEach(btn=>{
    const val = Number(btn.dataset.add);
    addLongPress(btn,
      () => { clearOverride(); setTotal(total + val); },
      () => { clearOverride(); setTotal(total + val); }
    );
  });

  exactInput.addEventListener('input',e=>{
    const v = Number(e.target.value);
    if (!isNaN(v) && e.target.value!=='') { override = true; setTotal(v); }
    else { override = false; }
  });

  update();

  const infoBtn = document.getElementById('infoBtn');
  const infoOverlay = document.getElementById('infoOverlay');
  const closeOverlay = document.getElementById('closeOverlay');
  infoBtn.addEventListener('click',()=>{ infoOverlay.style.display='flex'; });
  closeOverlay.addEventListener('click',()=>{ infoOverlay.style.display='none'; });

  // Prevent double-tap zoom on iOS
  let lastTouchEnd = 0;
  document.addEventListener('touchend', function (event) {
    const now = (new Date()).getTime();
    if (now - lastTouchEnd <= 300) {
      event.preventDefault();
    }
    lastTouchEnd = now;
  }, false);
})();
</script>
</body>
</html>

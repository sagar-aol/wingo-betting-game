<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Betting Modal</title>
    <style>
      :root {
        --bg: #0b0b0d;
        --panel: #14141a;
        --muted: #98a0ab;
        --accent: #1abc9c;
        --accent2: #e67e22;
        --radius: 12px;
        --max-w: 520px;
      }
      body {
        background: var(--bg);
        margin: 0;
        font-family: Arial, Helvetica, sans-serif;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 16px;
      }
      .modal {
        position: relative;
        width: 100%;
        max-width: var(--max-w);
        background: var(--panel);
        border-radius: var(--radius);
        padding: 4vw;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
      }
      h1 {
        text-align: center;
        font-size: 1.2rem;
        margin: 0 0 1rem;
        color: var(--accent);
      }

      /* Info button */
      .info-btn {
        position: absolute;
        top: 8px;
        right: 8px;
        background: none;
        border: none;
        color: var(--muted);
        font-size: 1.2rem;
        cursor: pointer;
      }

      /* Sections */
      .section {
        margin-bottom: 12px;
      }
      .row-flex {
        display: flex;
        gap: 8px;
      }
      .grid-4 {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
      }

      /* Buttons */
      .base-btn,
      .quick-btn,
      .mult-btn {
        flex: 1;
        padding: 10px;
        border-radius: 8px;
        background: #222;
        color: #fff;
        border: none;
        cursor: pointer;
        font-weight: bold;
      }
      .base-btn.active {
        background: var(--accent);
        color: #000;
      }
      .mult-btn.active {
        background: var(--accent2);
        color: #000;
      }

      /* Input & summary */
      .exact-input {
        width: 100%;
        padding: 10px;
        border-radius: 8px;
        border: none;
        text-align: center;
        font-size: 1rem;
        margin-bottom: 6px;
      }
      .helper {
        font-size: 12px;
        color: var(--muted);
        text-align: center;
        margin-bottom: 8px;
      }
      .summary {
        text-align: center;
        font-size: 1.2rem;
        font-weight: bold;
        margin: 12px 0;
      }

      /* Actions */
      .actions {
        display: flex;
        gap: 8px;
      }
      .actions button {
        flex: 1;
        padding: 10px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        font-weight: bold;
      }
      .cancel {
        background: #555;
        color: #fff;
      }
      .place {
        background: var(--accent);
        color: #000;
      }

      /* Info overlay */
      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 999;
      }
      .overlay-content {
        background: var(--panel);
        padding: 20px;
        border-radius: var(--radius);
        max-width: 90%;
        max-height: 80%;
        overflow-y: auto;
        color: #fff;
      }
      .overlay h2 {
        margin-top: 0;
        color: var(--accent);
      }
      .close-overlay {
        background: #555;
        color: #fff;
        border: none;
        padding: 6px 12px;
        border-radius: 6px;
        cursor: pointer;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <div class="modal">
      <button class="info-btn" id="infoBtn">ℹ️</button>
      <h1>Betting Calculator</h1>

      <!-- Section: Base amounts -->
      <div class="section">
        <div class="row-flex">
          <button class="base-btn active" data-base="1">$1</button>
          <button class="base-btn" data-base="10">$10</button>
          <button class="base-btn" data-base="100">$100</button>
          <button class="base-btn" data-base="1000">$1000</button>
        </div>
      </div>

      <!-- Section: Quick adjust -->
      <div class="section">
        <div class="row-flex">
          <button class="quick-btn" data-add="-10">-10</button>
          <button class="quick-btn" data-add="-5">-5</button>
          <button class="quick-btn" data-add="-2">-2</button>
          <button class="quick-btn" data-add="-1">-1</button>
          <button class="quick-btn" data-add="1">+1</button>
          <button class="quick-btn" data-add="2">+2</button>
          <button class="quick-btn" data-add="5">+5</button>
          <button class="quick-btn" data-add="10">+10</button>
        </div>
      </div>

      <!-- Section: Multipliers -->
      <div class="section">
        <div class="grid-4">
          <button class="mult-btn active" data-m="1">×1</button>
          <button class="mult-btn" data-m="2">×2</button>
          <button class="mult-btn" data-m="3">×3</button>
          <button class="mult-btn" data-m="4">×4</button>
          <button class="mult-btn" data-m="5">×5</button>
          <button class="mult-btn" data-m="10">×10</button>
          <button class="mult-btn" data-m="20">×20</button>
          <button class="mult-btn" data-m="50">×50</button>
        </div>
      </div>

      <!-- Exact amount input -->
      <input id="exactInput" class="exact-input" type="number" placeholder="Enter exact amount" />
      <div class="helper">Typing overrides buttons — Tap any button to clear</div>

      <!-- Summary -->
      <div class="summary" id="summary">Total: $1</div>

      <!-- Actions -->
      <div class="actions">
        <button class="cancel">Cancel</button>
        <button class="place">Place Bet</button>
      </div>
    </div>

    <!-- Info Overlay -->
    <div class="overlay" id="infoOverlay">
      <div class="overlay-content">
        <h2>How to Use the Betting Calculator</h2>
        <ul>
          <li><b>Base Amount:</b> Select your starting bet size (e.g., $1, $10, $100).</li>
          <li><b>Quick Adjust:</b> Use ±1, ±2, ±5, ±10 to fine-tune your bet.</li>
          <li><b>Multiplier:</b> Multiply your current base by ×2, ×3, etc. Long-press for rapid growth. ×1 adds the base amount repeatedly when held.</li>
          <li><b>Long Press:</b> Hold any button to repeat its effect until you release.</li>
          <li><b>Exact Amount:</b> Type your bet directly to override buttons. Tapping any button clears the override.</li>
        </ul>
        <button class="close-overlay" id="closeOverlay">Close</button>
      </div>
    </div>

    <script>
      (() => {
        const MAX_TOTAL = 1e10;
        const LONG_PRESS_DELAY = 350;
        const REPEAT_INTERVAL = 120;
        let base = 1,
          multiplier = 1,
          total = base * multiplier,
          override = false;
        let holdTimer,
          repeatTimer,
          isLongPress = false;

        const baseBtns = document.querySelectorAll(".base-btn");
        const multBtns = document.querySelectorAll(".mult-btn");
        const quickBtns = document.querySelectorAll(".quick-btn");
        const exactInput = document.getElementById("exactInput");
        const summaryEl = document.getElementById("summary");

        const fmt = (n) => Number(n).toLocaleString("en-IN", { maximumFractionDigits: 0 });
        const update = () => (summaryEl.textContent = `Total: $${fmt(total)}`);
        const setTotal = (v) => {
          total = Math.max(0, Math.min(MAX_TOTAL, Math.floor(v)));
          update();
        };
        const clearOverride = () => {
          if (override) {
            override = false;
            exactInput.value = "";
          }
        };

        function addLongPress(el, onClick, onHold) {
          el.addEventListener("click", () => {
            if (isLongPress) {
              isLongPress = false;
              return;
            }
            onClick();
          });
          el.addEventListener("pointerdown", () => {
            isLongPress = false;
            holdTimer = setTimeout(() => {
              isLongPress = true;
              onHold();
              repeatTimer = setInterval(onHold, REPEAT_INTERVAL);
            }, LONG_PRESS_DELAY);
          });
          ["pointerup", "pointerleave", "pointercancel"].forEach((ev) => {
            el.addEventListener(ev, () => {
              clearTimeout(holdTimer);
              clearInterval(repeatTimer);
            });
          });
        }

        baseBtns.forEach((btn) => {
          const val = Number(btn.dataset.base);
          addLongPress(
            btn,
            () => {
              clearOverride();
              baseBtns.forEach((b) => b.classList.remove("active"));
              btn.classList.add("active");
              base = val;
              setTotal(base * multiplier);
            },
            () => {
              clearOverride();
              setTotal(total + val);
            }
          );
        });

        multBtns.forEach((btn) => {
          const val = Number(btn.dataset.m);
          addLongPress(
            btn,
            () => {
              clearOverride();
              multBtns.forEach((b) => b.classList.remove("active"));
              btn.classList.add("active");
              multiplier = val;
              setTotal(base * multiplier);
            },
            () => {
              clearOverride();
              if (val === 1) setTotal(total + base);
              else setTotal(total * val);
            }
          );
        });

        quickBtns.forEach((btn) => {
          const val = Number(btn.dataset.add);
          addLongPress(
            btn,
            () => {
              clearOverride();
              setTotal(total + val);
            },
            () => {
              clearOverride();
              setTotal(total + val);
            }
          );
        });

        exactInput.addEventListener("input", (e) => {
          const v = Number(e.target.value);
          if (!isNaN(v) && e.target.value !== "") {
            override = true;
            setTotal(v);
          } else {
            override = false;
          }
        });

        update();

        // Info popup
        const infoBtn = document.getElementById("infoBtn");
        const infoOverlay = document.getElementById("infoOverlay");
        const closeOverlay = document.getElementById("closeOverlay");
        infoBtn.addEventListener("click", () => {
          infoOverlay.style.display = "flex";
        });
        closeOverlay.addEventListener("click", () => {
          infoOverlay.style.display = "none";
        });
      })();
    </script>
  </body>
</html>
